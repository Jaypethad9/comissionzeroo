{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All Users | Admin Panel</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="{% static 'css/admin/all_users.css' %}" />
  </head>
  <body>
    {% include "sidebar_admin.html" %}

    <div class="main-content">
      <!-- Top Navbar -->
      <header class="admin-navbar">
        <h2>All Users</h2>
{% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <h3 class="alert {{ message.tags }}">{{ message }}</>
        {% endfor %}
    </ul>
{% endif %}


      </header>

      <!-- Users Table -->
      <section class="users-section">
        <table class="users-table">
          <thead>
            <tr>
              <th>User ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
              <th>Status</th>
              <th>Joined</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
            <tr>
              <td>#{{ user.id }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>
                {% if user.role == "Admin" %}
                <span class="badge admin">Admin</span>
                {% elif user.role == "Customer" %}
                <span class="badge customer">Customer</span>
                {% elif user.role == "Service Provider" %}
                <span class="badge provider">Service Provider</span>
                {% else %}
                <span class="badge unknown">Unknown</span>
                {% endif %}
              </td>

              <td>
                <span class="status {{ user.status|lower }}">
                  {{ user.status }}
                </span>
              </td>
              <td>{{ user.joined }}</td>
              <td>
                {% if user.role == "Service Provider" %}
                  <a href="{% url 'view_provider_dashboard_admin' user.id %}" class="btn view">View</a>
                {% elif user.role == "Customer" %}
                  <a href="{% url 'view_customer_detail' user.id %}" class="btn view">View</a>
                {% else %}
                  <span class="btn view disabled">View</span>
                {% endif %}

<a href="{% url 'user_delete' user.id %}" class="btn delete" onclick="return confirm('Are you sure you want to delete this user?');">Delete</a>

              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="7">No users found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </div>
  </body>
</html>
